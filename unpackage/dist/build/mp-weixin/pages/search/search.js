(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"064e":function(t,e,a){},"0ae2":function(t,e,a){"use strict";a.r(e);var n=a("c4d9"),s=a.n(n);for(var c in n)"default"!==c&&function(t){a.d(e,t,function(){return n[t]})}(c);e["default"]=s.a},"1a3f":function(t,e,a){"use strict";a("74da");var n=c(a("b0ce")),s=c(a("ace8"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(s.default))},"6add":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"page"},[a("header-nav",{attrs:{"navbar-data":t.nvabarData,mpcomid:"793f5f4e-0"}}),a("view",{staticClass:"search_ctn",style:"margin-top:"+t.height+"px",attrs:{eventid:"793f5f4e-6"},on:{click:function(e){e.stopPropagation(),t.delSelect()}}},[a("view",{staticClass:"search_input"},[a("view",{staticClass:"search_input_cnt"},[a("input",{attrs:{type:"text","confirm-type":"search",value:t.inputVal,placeholder:"寻味美食 / 一触及达","placeholder-class":"plhclass",eventid:"793f5f4e-0"},on:{input:t.inputSearch,focus:t.inputSearch,confirm:function(e){t.gosearchMsg(t.inputVal)}}}),a("view",{attrs:{eventid:"793f5f4e-1"},on:{click:t.cancelBack}},[t._v("取消")])]),a("view",{staticClass:"selectContent"},t._l(t.searchResultDatas,function(e,n){return a("view",{key:n,staticClass:"search_input_slect",attrs:{eventid:"793f5f4e-2-"+n},on:{click:function(a){a.stopPropagation(),t.gosearchMsg(e)}}},[t._v(t._s(e))])})),t.history.length>0?a("view",{staticClass:"search_type_title dp"},[a("text",[t._v("搜索历史")]),a("text",{attrs:{eventid:"793f5f4e-3"},on:{click:t.delHistory}},[t._v("清空")])]):t._e(),t.history.length>0?a("view",{staticClass:"search_hotcontent"},t._l(t.history,function(e,n){return a("view",{key:n,staticClass:"hot_item",attrs:{eventid:"793f5f4e-4-"+n},on:{click:function(a){a.stopPropagation(),t.gosearchMsg(e)}}},[t._v(t._s(e))])})):t._e(),a("view",{staticClass:"search_type_title"},[t._v("热门搜索")]),a("view",{staticClass:"search_hotcontent"},t._l(t.hotList,function(e,n){return a("view",{key:n,staticClass:"hot_item",attrs:{eventid:"793f5f4e-5-"+n},on:{click:function(a){a.stopPropagation(),t.gosearchMsg(e)}}},[t._v(t._s(e))])})),a("view",{staticClass:"advertisingBox"},[a("ad",{attrs:{"unit-id":"adunit-92a612528aa85dc1","ad-type":"video","ad-theme":"white",mpcomid:"793f5f4e-1"}})],1)])])],1)},s=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})},8141:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"listCommon"},[t._v("6666")])},s=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})},"98ce":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"searchList",props:{datas:{type:Object},onTap:{type:Function}},data:function(){return{searchArray:[],keyName:""}},methods:{_propertyDataChange:function(t){var e=this.getHilightStrArray(t.name,t.key);this.keyName=t.key,this.searchArray=e},getHilightStrArray:function(t,e){return t.replace(new RegExp("".concat(e),"g"),"%%".concat(e,"%%")).split("%%")}}};e.default=n},"9a18":function(t,e,a){"use strict";var n=a("cb13"),s=a.n(n);s.a},ace8:function(t,e,a){"use strict";a.r(e);var n=a("6add"),s=a("0ae2");for(var c in s)"default"!==c&&function(t){a.d(e,t,function(){return s[t]})}(c);a("9a18");var i=a("2877"),r=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},bf89:function(t,e,a){"use strict";a.r(e);var n=a("8141"),s=a("fa5a");for(var c in s)"default"!==c&&function(t){a.d(e,t,function(){return s[t]})}(c);a("c073");var i=a("2877"),r=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},c073:function(t,e,a){"use strict";var n=a("064e"),s=a.n(n);s.a},c4d9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(a("bdc7")),s=c(a("bf89"));function c(t){return t&&t.__esModule?t:{default:t}}var i={data:function(){return{inputVal:"",height:"",history:[],hotList:[],nvabarData:{showCapsule:1,title:"寻味美食"},isIphoneX:!1,searchResultDatas:[]}},onLoad:function(t){var e=this;e.isIphoneX=n.default.globalData.isIphoneX,e.height=2*n.default.globalData.height+20,e.history=wx.getStorageSync("searchRecord")||[],e.hotSearchList()},onHide:function(){this.inputVal=""},comments:{searchList:s.default},methods:{hotSearchList:function(){var t=this,e=new Object;e.is_weapp=1,e.weapp_src="xcf",this.$Api.getHotListItem(e).then(function(e){console.log(e),t.hotList=e.data.content.keywords.slice(0,20)})},inputSearch:function(t){var e=this,a=new Object;a.is_weapp=1,a.weapp_src="xcf",a.q=t.detail.value,this.inputVal=t.detail.value,t.detail.value.length>0?this.$Api.searchSelect(a).then(function(a){console.log(a);var n=a.data.content.keywords.map(function(e,a){return{key:t.detail.value,name:e,id:a}});e.searchData=n.slice(0,10),e.searchResultDatas=a.data.content.keywords,console.log(e.searchResultDatas)}):0==t.detail.value&&(this.searchResultDatas=[])},delSelect:function(){this.searchResultDatas=[]},gosearchMsg:function(t){var e=this;console.log(t),e.searchHistory(t),wx.navigateTo({url:"../cateList/cateList?q="+t})},cancelBack:function(){this.inputVal="",this.searchResultDatas=[],wx.navigateBack({delta:1})},searchHistory:function(t){var e=wx.getStorageSync("searchRecord")||[];""!=t&&(console.log(e.length),e.length<10&&-1==e.indexOf(t)?e.unshift(t):10==e.length&&(e.pop(),e.unshift(t)),wx.setStorageSync("searchRecord",e))},delHistory:function(){var t=this;wx.showModal({title:"提示",content:"确认清除历史记录吗?",success:function(e){e.confirm?wx.removeStorage({key:"searchRecord",success:function(e){t.history=[]}}):e.cancel&&console.log("用户点击取消")}})}}};e.default=i},cb13:function(t,e,a){},fa5a:function(t,e,a){"use strict";a.r(e);var n=a("98ce"),s=a.n(n);for(var c in n)"default"!==c&&function(t){a.d(e,t,function(){return n[t]})}(c);e["default"]=s.a}},[["1a3f","common/runtime","common/vendor"]]]);